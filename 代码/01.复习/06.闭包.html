<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>闭包</title>
</head>
<body>
  <script>
    /*
      1. 什么是闭包？
        通过chrome调试查看，闭包是一个包含被引用的局部变量的“对象”，closure
        闭包存在嵌套的内部函数中
      2. 闭包产生条件：
        - 函数嵌套
        - 内部函数引用外部函数的局部变量
        - 执行外部函数
      3. 闭包作用
        延长函数局部变量存活时间(生命周期)
        让函数外部操作（读/写）函数内部的数据
      4. 闭包的生命周期
        产生：内部函数定义执行完了
        死亡：当内部函数成为垃圾对象（内部函数没有任何变量引用），自动被垃圾回收机制回收释放
      5. 闭包缺点：
        容易导致内存泄漏
          内存泄漏：占用了内存空间，没有及时释放
          内存溢出：将要使用内存超过了实际内存（程序会直接崩溃）
        解决：及时释放
          目的：当保存闭包内部函数成为垃圾对象  fn = null;
      6. 闭包应用：
        高阶函数（执行函数返回值新函数） -->  React
        框架/库底层源码 --> Vue
    */
    // var b = 2;
    function fn1() {
      debugger
      var a = 1;
      /* function fn2(x) {
        // console.log(a);
        // console.log(b);
        a = a + x;
        return a
      } */
      var fn2 = function () {
        console.log(a);
      }
      // console.log(fn2);
      return fn2;
    }
    // console.log(111);
    var fn2 = fn1();
    var a = fn2(2);
    // console.log(222);
    console.log(a); 
    
    
  </script>
</body>
</html>